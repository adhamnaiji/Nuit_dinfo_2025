{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/adhem/OneDrive/Documents/Nuit%20d%27info/projet_nuit_digital_/Nuit_D_Info/stl-viewer-build/app/api/send-quote/route.ts"],"sourcesContent":["import { type NextRequest, NextResponse } from \"next/server\"\nimport { Resend } from \"resend\"\n\nexport async function POST(request: NextRequest) {\n  try {\n    const body = await request.json()\n    const { email, fileName, dimensions, message } = body\n\n    // Validate required fields\n    if (!email || !fileName || !dimensions) {\n      return NextResponse.json({ error: \"Missing required fields\" }, { status: 400 })\n    }\n\n    const resend = new Resend(\"re_couzzkTw_8udMasz9TSS5ymZ2JZz7U1ZY\")\n\n    const emailContent = `\n    <div style=\"font-family: Arial, sans-serif; padding: 20px; max-width: 600px;\">\n      <h2 style=\"color: #333; border-bottom: 2px solid #10b981; padding-bottom: 10px;\">Nouvelle Demande de Devis - UTOPIE 3D</h2>\n      \n      <div style=\"background-color: #f5f5f5; padding: 15px; border-radius: 5px; margin-bottom: 20px;\">\n        <p><strong>Email du client:</strong> ${email}</p>\n        <p><strong>Fichier STL:</strong> ${fileName}</p>\n        <p><strong>Dimensions:</strong></p>\n        <ul>\n          <li>Largeur: ${dimensions.width.toFixed(2)}mm</li>\n          <li>Hauteur: ${dimensions.height.toFixed(2)}mm</li>\n          <li>Profondeur: ${dimensions.depth.toFixed(2)}mm</li>\n        </ul>\n        ${message ? `<p><strong>Message:</strong> ${message}</p>` : \"\"}\n      </div>\n\n      <p style=\"color: #666; font-size: 14px;\">Veuillez répondre directement à l'adresse email du client.</p>\n    </div>\n    `\n\n    const { data, error } = await resend.emails.send({\n      from: \"UTOPIE 3D <onboarding@resend.dev>\",\n      to: \"adhemnaiji@gmail.com\",\n      subject: `Demande de Devis - ${fileName}`,\n      html: emailContent,\n    })\n\n    if (error) {\n      console.error(\"[v0] Resend error:\", error)\n      return NextResponse.json({ error: \"Failed to send email\", details: error }, { status: 500 })\n    }\n\n    await resend.emails.send({\n      from: \"UTOPIE 3D <onboarding@resend.dev>\",\n      to: email,\n      subject: \"Votre demande de devis a été reçue\",\n      html: `\n        <div style=\"font-family: Arial, sans-serif; padding: 20px; max-width: 600px;\">\n          <h2 style=\"color: #10b981;\">Merci pour votre demande!</h2>\n          <p>Nous avons bien reçu votre demande de devis pour le fichier <strong>${fileName}</strong>.</p>\n          <p>Notre équipe UTOPIE 3D vous contactera dans les 24 heures.</p>\n          <p style=\"margin-top: 20px; color: #666;\">Cordialement,<br/><strong>L'équipe UTOPIE 3D</strong></p>\n        </div>\n      `,\n    })\n\n    return NextResponse.json(\n      {\n        success: true,\n        message: \"Demande de devis envoyée avec succès!\",\n        data,\n      },\n      { status: 200 },\n    )\n  } catch (error) {\n    console.error(\"[v0] Quote request error:\", error)\n    return NextResponse.json(\n      {\n        error: \"Erreur lors de l'envoi de la demande\",\n        details: error instanceof Error ? error.message : \"Unknown error\",\n      },\n      { status: 500 },\n    )\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,UAAU,EAAE,OAAO,EAAE,GAAG;QAEjD,2BAA2B;QAC3B,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,YAAY;YACtC,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA0B,GAAG;gBAAE,QAAQ;YAAI;QAC/E;QAEA,MAAM,SAAS,IAAI,oJAAM,CAAC;QAE1B,MAAM,eAAe,CAAC;;;;;6CAKmB,EAAE,MAAM;yCACZ,EAAE,SAAS;;;uBAG7B,EAAE,WAAW,KAAK,CAAC,OAAO,CAAC,GAAG;uBAC9B,EAAE,WAAW,MAAM,CAAC,OAAO,CAAC,GAAG;0BAC5B,EAAE,WAAW,KAAK,CAAC,OAAO,CAAC,GAAG;;QAEhD,EAAE,UAAU,CAAC,6BAA6B,EAAE,QAAQ,IAAI,CAAC,GAAG,GAAG;;;;;IAKnE,CAAC;QAED,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,OAAO,MAAM,CAAC,IAAI,CAAC;YAC/C,MAAM;YACN,IAAI;YACJ,SAAS,CAAC,mBAAmB,EAAE,UAAU;YACzC,MAAM;QACR;QAEA,IAAI,OAAO;YACT,QAAQ,KAAK,CAAC,sBAAsB;YACpC,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;gBAAwB,SAAS;YAAM,GAAG;gBAAE,QAAQ;YAAI;QAC5F;QAEA,MAAM,OAAO,MAAM,CAAC,IAAI,CAAC;YACvB,MAAM;YACN,IAAI;YACJ,SAAS;YACT,MAAM,CAAC;;;iFAGoE,EAAE,SAAS;;;;MAItF,CAAC;QACH;QAEA,OAAO,gJAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,SAAS;YACT;QACF,GACA;YAAE,QAAQ;QAAI;IAElB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,6BAA6B;QAC3C,OAAO,gJAAY,CAAC,IAAI,CACtB;YACE,OAAO;YACP,SAAS,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QACpD,GACA;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}